/* This file is part of Mantra.
 *
 * Copyright (C) 2009, 2010 Chris O'Neill
 *           Originally by the Syzygy Cult
 *
 * This program is free software; you can redistribute it and/or
 * modify it under the terms of the GNU General Public License
 * as published by the Free Software Foundation; either version 2
 * of the License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA
 02110-1301, USA.
 */

#if defined(MANTRA_WINDOWS)
//#include "StdAfx.h"
#include <allegro.h>
#else
#include <Allegro/allegro.h>
#endif

#include "GameConstants.h"

// actually define the globals
PALETTE g_SystemPalette;
int g_BlackColor;
int g_RedColor;

int g_CurrentScreenX;
int g_CurrentScreenY;

MapScreen g_MapScreens[NUM_SCREENS];
RegionCell g_MapRegions[NUM_SCREENS];

BITMAP* g_TileIcons[NUM_TILE_ICONS];
BITMAP* g_BossIcons[NUM_BOSS_ICONS];
BITMAP* g_EnemyIcons[NUM_ENEMY_ICONS];
BITMAP* g_SaricIcons[NUM_SARIC_ICONS];
BITMAP* g_SwordIcons[NUM_SWORD_ICONS];

unsigned char g_BossMasks[4096 * NUM_BOSS_ICONS];
unsigned char g_EnemyMasks[1024 * NUM_ENEMY_ICONS];
unsigned char g_SaricMask[1024];
unsigned char g_SwordMasks[NUM_SWORD_ICONS * 1024];
unsigned char g_TileMasks[NUM_TILE_ICONS * 1024];

Item g_ItemTemplates[NUM_ITEM_TEMPLATES];

BITMAP* g_SmallIcons[NUM_ITEM_TEMPLATES];
BITMAP* g_LargeIcons[NUM_ITEM_TEMPLATES];

BITMAP* g_ImmunityIcons[NUM_IMMUNITY_ICONS];

Enemy g_TmplEnemies[NUM_TMPL_ENEMIES];

Str255 g_Messages[NUM_MESSAGES];

int g_CurrentScreen;

EnemyHandle g_FirstEnemy, g_CurrentEnemy;
int g_EnemiesInRoom;

Saric g_Saric;

unsigned short g_DeathRecord[NUM_SCREENS];

BITMAP *g_ScreenBuffer;
ALFONT_FONT *g_Font;
ALFONT_FONT *g_DialogFont;
ALFONT_FONT *g_LargeFont;

Store g_Stores[NUM_STORES];

BITMAP *g_SwordAnimData[NUM_SWORD_FRAMES];

BITMAP *g_WinBitmap;
BITMAP *g_LoseBitmap;
BITMAP *g_StoryBitmap;
BITMAP *g_MantraBitmap;
BITMAP *g_CursorBitmap;
BITMAP *g_HelpBitmap;

char g_GameInProgress;
char g_GameDirty;
volatile LONG_LONG g_GameplayTime;
SavedGame g_SavedGames[MAX_SAVED_GAMES];

// legacy arrays (save these for last, they take up too much room)

short sineof[256] = 
{
	0,
	804,
	1607,
	2410,
	3211,
	4011,
	4807,
	5601,
	6392,
	7179,
	7961,
	8739,
	9511,
	10278,
	11038,
 	11792,
	12539,
	13278,
	14009,
	14732,
	15446,
	16150,
	16845,
	17530,
	18204,
	18867,
	19519,
	20159,
	20787,
	21402,
	22004,
	22594,
	23169,
	23731,
	24278,
	24811,
	25329,
	25831,
	26318,
	26789,
	27244,
	27683,
	28105,
	28510,
	28897,
	29268,
	29621,
	29955,
	30272,
	30571,
	30851,
	31113,
	31356,
	31580,
	31785,
	31970,
	32137,
	32284,
	32412,
	32520,
	32609,
	32678,
	32727,
	32757,
	32767,
	32757,
	32727,
	32678,
	32609,
	32520,
	32412,
	32284,
	32137,
	31970,
	31785,
	31580,
	31356,
	31113,
	30851,
	30571,
	30272,
	29955,
	29621,
	29268,
	28897,
	28510,
	28105,
	27683,
	27244,
	26789,
	26318,
	25831,
	25329,
	24811,
	24278,
	23731,
	23169,
	22594,
	22004,
	21402,
	20787,
	20159,
	19519,
	18867,
	18204,
	17530,
	16845,
	16150,
	15446,
	14732,
	14009,
	13278,
	12539,
	11792,
	11038,
	10278,
	9511,
	8739,
	7961,
	7179,
	6392,
	5601,
	4807,
	4011,
	3211,
	2410,
	1607,
	804,
	0,
	-804,
	-1607,
	-2410,
	-3211,
	-4011,
	-4807,
	-5601,
	-6392,
	-7179,
	-7961,
	-8739,
	-9511,
	-10278,
	-11038,
	-11792,
	-12539,
	-13278,
	-14009,
	-14732,
	-15446,
	-16150,
	-16845,
	-17530,
	-18204,
	-18867,
	-19519,
	-20159,
	-20787,
	-21402,
	-22004,
	-22594,
	-23169,
	-23731,
	-24278,
	-24811,
	-25329,
	-25831,
	-26318,
	-26789,
	-27244,
	-27683,
	-28105,
	-28510,
	-28897,
	-29268,
	-29621,
	-29955,
	-30272,
	-30571,
	-30851,
	-31113,
	-31356,
	-31580,
	-31785,
	-31970,
	-32137,
	-32284,
	-32412,
	-32520,
	-32609,
	-32678,
	-32727,
	-32757,
	-32767,
	-32757,
	-32727,
	-32678,
	-32609,
	-32520,
	-32412,
	-32284,
	-32137,
	-31970,
	-31785,
	-31580,
	-31356,
	-31113,
	-30851,
	-30571,
	-30272,
	-29955,
	-29621,
	-29268,
	-28897,
	-28510,
	-28105,
	-27683,
	-27244,
	-26789,
	-26318,
	-25831,
	-25329,
	-24811,
	-24278,
	-23731,
	-23169,
	-22594,
	-22004,
	-21402,
	-20787,
	-20159,
	-19519,
	-18867,
	-18204,
	-17530,
	-16845,
	-16150,
	-15446,
	-14732,
	-14009,
	-13278,
	-12539,
	-11792,
	-11038,
	-10278,
	-9511,
	-8739,
	-7961,
	-7179,
	-6392,
	-5601,
	-4807,
	-4011,
	-3211,
	-2410,
	-1607,
	-804
};

short cosof[256] = 
{
	32767,
	32757,
	32727,
	32678,
	32609,
	32520,
	32412,
	32284,
	32137,
	31970,
	31785,
	31580,
	31356,
	31113,
	30851,
	30571,
	30272,
	29955,
	29621,
	29268,
	28897,
	28510,
	28105,
	27683,
	27244,
	26789,
	26318,
	25831,
	25329,
	24811,
	24278,
	23731,
	23169,
	22594,
	22004,
	21402,
	20787,
	20159,
	19519,
	18867,
	18204,
	17530,
	16845,
	16150,
	15446,
	14732,
	14009,
	13278,
	12539,
	11792,
	11038,
	10278,
	9511,
	8739,
	7961,
	7179,
	6392,
	5601,
	4807,
	4011,
	3211,
	2410,
	1607,
	804,
	0,
	-804,
	-1607,
	-2410,
	-3211,
	-4011,
	-4807,
	-5601,
	-6392,
	-7179,
	-7961,
	-8739,
	-9511,
	-10278,
	-11038,
	-11792,
	-12539,
	-13278,
	-14009,
	-14732,
	-15446,
	-16150,
	-16845,
	-17530,
	-18204,
	-18867,
	-19519,
	-20159,
	-20787,
	-21402,
	-22004,
	-22594,
	-23169,
	-23731,
	-24278,
	-24811,
	-25329,
	-25831,
	-26318,
	-26789,
	-27244,
	-27683,
	-28105,
	-28510,
	-28897,
	-29268,
	-29621,
	-29955,
	-30272,
	-30571,
	-30851,
	-31113,
	-31356,
	-31580,
	-31785,
	-31970,
	-32137,
	-32284,
	-32412,
	-32520,
	-32609,
	-32678,
	-32727,
	-32757,
	-32767,
	-32757,
	-32727,
	-32678,
	-32609,
	-32520,
	-32412,
	-32284,
	-32137,
	-31970,
	-31785,
	-31580,
	-31356,
	-31113,
	-30851,
	-30571,
	-30272,
	-29955,
	-29621,
	-29268,
	-28897,
	-28510,
	-28105,
	-27683,
	-27244,
	-26789,
	-26318,
	-25831,
	-25329,
	-24811,
	-24278,
	-23731,
	-23169,
	-22594,
	-22004,
	-21402,
	-20787,
	-20159,
	-19519,
	-18867,
	-18204,
	-17530,
	-16845,
	-16150,
	-15446,
	-14732,
	-14009,
	-13278,
	-12539,
	-11792,
	-11038,
	-10278,
	-9511,
	-8739,
	-7961,
	-7179,
	-6392,
	-5601,
	-4807,
	-4011,
	-3211,
	-2410,
	-1607,
	-804,
	0,
	804,
	1607,
	2410,
	3211,
	4011,
	4807,
	5601,
	6392,
	7179,
	7961,
	8739,
	9511,
	10278,
	11038,
	11792,
	12539,
	13278,
	14009,
	14732,
	15446,
	16150,
	16845,
	17530,
	18204,
	18867,
	19519,
	20159,
	20787,
	21402,
	22004,
	22594,
	23169,
	23731,
	24278,
	24811,
	25329,
	25831,
	26318,
	26789,
	27244,
	27683,
	28105,
	28510,
	28897,
	29268,
	29621,
	29955,
	30272,
	30571,
	30851,
	31113,
	31356,
	31580,
	31785,
	31970,
	32137,
	32284,
	32412,
	32520,
	32609,
	32678,
	32727,
	32757
};
